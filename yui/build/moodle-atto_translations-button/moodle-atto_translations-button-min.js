YUI.add("moodle-atto_translations-button",function(a,t){var o={translationhashregex:/<span data-translationhash[ ]*=[ ]*[\'"]+([a-zA-Z0-9]+)[\'"]+[ ]*>[ ]*<\/span>/,initializer:function(){var a,t=this.addButton({icon:"t/reload",callback:this._replaceHash,title:"replacehash"}),e=this.get("host"),s=e.textarea.get("value"),n=this.get("unusedhash"),r=o.translationhashregex.exec(s);n&&!r?(a='<span data-translationhash="'+n+'"></span>',e.textarea.set("value",a+s),e.updateFromTextArea(),t.setAttribute("disabled","disabled"),(n=e.textarea.ancestor("form"))&&n.on("submit",function(){e.textarea.get("value")===a&&(e.textarea.set("value",""),e.updateFromTextArea())},this)):a=r},_replaceHash:function(){var a=this.get("unusedhash"),t=this.get("host"),e=t.textarea.get("value"),e=e.replaceAll(/<span data-translationhash[ ]*=[ ]*[\'"]+([a-zA-Z0-9]+)[\'"]+[ ]*>[ ]*<\/span>/g,"");t.textarea.set("value",'<span data-translationhash="'+a+'"></span>'+e),t.updateFromTextArea()}};a.namespace("M.atto_translations").Button=a.Base.create("button",a.M.editor_atto.EditorPlugin,[],o,{ATTRS:{unusedhash:{value:!1}}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});